{"is_source_file": true, "format": "Python", "description": "This file defines various service classes for managing Software Requirements Specification (SRS) CSV uploads, generating test cases and scripts based on SRS data, orchestrating test execution (including mock and real pytest runs), and exporting results. It appears to be part of a testing automation or validation framework with integration points for version control, script generation, and result management.", "external_files": ["./extensions.py", "./models.py", "./utils.py", "./errors.py"], "external_methods": ["db.session.query", "db.session.get", "db.session.add", "db.session.flush", "db.session.commit", "ensure_dir", "secure_filename_like", "sha256_bytes", "validate_srs_csv", "write_zip_from_files"], "published": ["SRSService", "LLMService", "ScriptService", "ExecutionService", "ResultsService", "GenerationService"], "classes": [{"name": "SRSService", "description": "Service class handling the storage, validation, and versioning of SRS CSV documents."}, {"name": "LLMService", "description": "Mockable service that generates test cases from SRS rows, either via a real LLM or mock synthesis."}, {"name": "ScriptService", "description": "Generates pytest + Playwright test scripts from test cases, and persists them."}, {"name": "ExecutionService", "description": "Coordinates execution of test runs, supporting mock execution or real pytest invocations, and handles results."}, {"name": "ResultsService", "description": "Provides retrieval and export functionalities for test run results and scripts."}, {"name": "GenerationService", "description": "High-level orchestration: generates test cases from SRS versions and creates corresponding scripts."}], "methods": [{"name": "str _storage_root()", "description": "Determines the root directory for storing files, ensuring its existence.", "scope": "", "scopeKind": ""}, {"name": "Tuple[SRS,SRSVersion,List[Dict[str,str]]] upload_srs(name: str, uploaded_by: Optional[str], file_bytes: bytes, notes: Optional[str] = None)", "description": "Validates and stores an SRS CSV as a new version, returning relevant entities.", "scope": "SRSService", "scopeKind": "class"}, {"name": "List[SRS] list_srs()", "description": "Returns all active SRS documents.", "scope": "SRSService", "scopeKind": "class"}, {"name": "List[SRSVersion] list_versions(srs_id: int)", "description": "Lists all versions for a specified SRS.", "scope": "SRSService", "scopeKind": "class"}, {"name": "is_mock (LLMService)", "description": "Checks if LLM service is in mock mode."}, {"name": "List[Dict[str,str]] generate_test_cases(rows: List[Dict[str, str]])", "description": "Generates test cases from SRS rows, either via mock or real LLM.", "scope": "LLMService", "scopeKind": "class"}, {"name": "Tuple[str,str] generate_pytest_playwright_script(test_case: TestCase)", "description": "Produces a minimal mock pytest-playwright test script for a given test case.", "scope": "ScriptService", "scopeKind": "class"}, {"name": "List[TestScript] create_scripts_for_cases(cases: List[TestCase], actor: Optional[str])", "description": "Creates and persists test scripts for a list of test cases.", "scope": "ScriptService", "scopeKind": "class"}, {"name": "is_mock (ExecutionService)", "description": "Checks if execution should be simulated (mocked)."}, {"name": "TestRun trigger_run(selected_test_case_ids: Optional[List[int]], triggered_by: Optional[str], params: Optional[Dict] = None)", "description": "Creates a test run and executes it, either synchronously in mock mode or via pytest.", "scope": "ExecutionService", "scopeKind": "class"}, {"name": "None _complete_run_mock(run: TestRun)", "description": "Completes a test run instantly with all tests marked as passed in mock mode.", "scope": "ExecutionService", "scopeKind": "class"}, {"name": "None _run_with_pytest(run: TestRun, cases: List[TestCase])", "description": "Performs actual test execution using pytest, collecting logs and updating results.", "scope": "ExecutionService", "scopeKind": "class"}, {"name": "TestRun get_run(run_id: int)", "description": "Fetches a specific test run detail.", "scope": "ResultsService", "scopeKind": "class"}, {"name": "List[TestResult] get_run_results(run_id: int)", "description": "Retrieves results for a specific test run.", "scope": "ResultsService", "scopeKind": "class"}, {"name": "Tuple[str,bytes] export_scripts_zip(srs_version_id: int)", "description": "Bundles all scripts for an SRS version into a zip archive for download.", "scope": "ResultsService", "scopeKind": "class"}, {"name": "Tuple[str,bytes] export_results_csv(run_id: int)", "description": "Exports test run results as a CSV file.", "scope": "ResultsService", "scopeKind": "class"}, {"name": "List[TestCase] generate_test_cases_for_version(srs_version_id: int)", "description": "Uses the SRS version CSV file to generate test cases via LLM, persisting them.", "scope": "GenerationService", "scopeKind": "class"}, {"name": "List[TestScript] generate_scripts_for_version(srs_version_id: int, actor: Optional[str])", "description": "Creates scripts for all active test cases of a particular SRS version.", "scope": "GenerationService", "scopeKind": "class"}, {"name": "bool is_mock()", "scope": "LLMService", "scopeKind": "class", "description": "unavailable"}], "search-terms": ["SRSCSV", "TestCaseGeneration", "pytest-playwright", "test execution orchestration", "test result export", "versioned SRS", "mock LLM", "pytest runner"], "state": 2, "file_id": 19, "knowledge_revision": 52, "git_revision": "bed348cde7b34f0dc3ef761b6a172266902711ee", "ctags": [{"_type": "tag", "name": "ExecutionService", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^class ExecutionService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "GenerationService", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^class GenerationService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LLMService", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^class LLMService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ResultsService", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^class ResultsService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SRSService", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^class SRSService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ScriptService", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^class ScriptService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_complete_run_mock", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def _complete_run_mock(run: TestRun) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(run: TestRun)", "scope": "ExecutionService", "scopeKind": "class"}, {"_type": "tag", "name": "_run_with_pytest", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def _run_with_pytest(run: TestRun, cases: List[TestCase]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(run: TestRun, cases: List[TestCase])", "scope": "ExecutionService", "scopeKind": "class"}, {"_type": "tag", "name": "_storage_root", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^def _storage_root() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "create_scripts_for_cases", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def create_scripts_for_cases(cases: List[TestCase], actor: Optional[str]) -> List[TestScript/", "language": "Python", "typeref": "typename:List[TestScript]", "kind": "member", "signature": "(cases: List[TestCase], actor: Optional[str])", "scope": "ScriptService", "scopeKind": "class"}, {"_type": "tag", "name": "export_results_csv", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def export_results_csv(run_id: int) -> Tuple[str, bytes]:$/", "language": "Python", "typeref": "typename:Tuple[str,bytes]", "kind": "member", "signature": "(run_id: int)", "scope": "ResultsService", "scopeKind": "class"}, {"_type": "tag", "name": "export_scripts_zip", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def export_scripts_zip(srs_version_id: int) -> Tuple[str, bytes]:$/", "language": "Python", "typeref": "typename:Tuple[str,bytes]", "kind": "member", "signature": "(srs_version_id: int)", "scope": "ResultsService", "scopeKind": "class"}, {"_type": "tag", "name": "generate_pytest_playwright_script", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def generate_pytest_playwright_script(test_case: TestCase) -> Tuple[str, str]:$/", "language": "Python", "typeref": "typename:Tuple[str,str]", "kind": "member", "signature": "(test_case: TestCase)", "scope": "ScriptService", "scopeKind": "class"}, {"_type": "tag", "name": "generate_scripts_for_version", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def generate_scripts_for_version(srs_version_id: int, actor: Optional[str]) -> List[TestScri/", "language": "Python", "typeref": "typename:List[TestScript]", "kind": "member", "signature": "(srs_version_id: int, actor: Optional[str])", "scope": "GenerationService", "scopeKind": "class"}, {"_type": "tag", "name": "generate_test_cases", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def generate_test_cases(rows: List[Dict[str, str]]) -> List[Dict[str, str]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,str]]", "kind": "member", "signature": "(rows: List[Dict[str, str]])", "scope": "LLMService", "scopeKind": "class"}, {"_type": "tag", "name": "generate_test_cases_for_version", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def generate_test_cases_for_version(srs_version_id: int) -> List[TestCase]:$/", "language": "Python", "typeref": "typename:List[TestCase]", "kind": "member", "signature": "(srs_version_id: int)", "scope": "GenerationService", "scopeKind": "class"}, {"_type": "tag", "name": "get_run", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def get_run(run_id: int) -> TestRun:$/", "language": "Python", "typeref": "typename:TestRun", "kind": "member", "signature": "(run_id: int)", "scope": "ResultsService", "scopeKind": "class"}, {"_type": "tag", "name": "get_run_results", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def get_run_results(run_id: int) -> List[TestResult]:$/", "language": "Python", "typeref": "typename:List[TestResult]", "kind": "member", "signature": "(run_id: int)", "scope": "ResultsService", "scopeKind": "class"}, {"_type": "tag", "name": "is_mock", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def is_mock() -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "()", "scope": "ExecutionService", "scopeKind": "class"}, {"_type": "tag", "name": "is_mock", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def is_mock() -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "()", "scope": "LLMService", "scopeKind": "class"}, {"_type": "tag", "name": "list_srs", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def list_srs() -> List[SRS]:$/", "language": "Python", "typeref": "typename:List[SRS]", "kind": "member", "signature": "()", "scope": "SRSService", "scopeKind": "class"}, {"_type": "tag", "name": "list_versions", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def list_versions(srs_id: int) -> List[SRSVersion]:$/", "language": "Python", "typeref": "typename:List[SRSVersion]", "kind": "member", "signature": "(srs_id: int)", "scope": "SRSService", "scopeKind": "class"}, {"_type": "tag", "name": "trigger_run", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def trigger_run(selected_test_case_ids: Optional[List[int]], triggered_by: Optional[str], pa/", "language": "Python", "typeref": "typename:TestRun", "kind": "member", "signature": "(selected_test_case_ids: Optional[List[int]], triggered_by: Optional[str], params: Optional[Dict] = None)", "scope": "ExecutionService", "scopeKind": "class"}, {"_type": "tag", "name": "upload_srs", "path": "/home/kavia/workspace/code-generation/ai-verification-and-validation-automation-6276-6285/test_automation_backend/app/services.py", "pattern": "/^    def upload_srs(name: str, uploaded_by: Optional[str], file_bytes: bytes, notes: Optional[str/", "language": "Python", "typeref": "typename:Tuple[SRS,SRSVersion,List[Dict[str,str]]]", "kind": "member", "signature": "(name: str, uploaded_by: Optional[str], file_bytes: bytes, notes: Optional[str] = None)", "scope": "SRSService", "scopeKind": "class"}], "hash": "841ad91fae846871641f42c8233e0d5b", "format-version": 4, "code-base-name": "test_automation_backend", "filename": "test_automation_backend/app/services.py", "revision_history": [{"52": "bed348cde7b34f0dc3ef761b6a172266902711ee"}]}